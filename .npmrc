# ============================================================================
# pnpm Configuration File (.npmrc)
# ============================================================================
# This file configures the behavior of pnpm (and npm/yarn if used).
# It applies to all pnpm commands run in this project.
#
# This configuration is optimized for:
# - Team consistency (engine-strict ensures same environment)
# - Dependency reliability (save-exact + RenovateBot for controlled updates)
# - Developer experience (auto-install-peers reduces manual work)
#
# Related configuration files:
# - .nvmrc: Defines exact Node.js version (v24.12.0)
# - package.json "engines": Defines minimum Node.js/pnpm versions
# - renovate.json: Automates dependency updates via pull requests
#
# If you need to temporarily bypass engine-strict for testing:
# pnpm install --no-engine-strict
#
# Documentation: https://pnpm.io/npmrc
# ============================================================================

# ----------------------------------------------------------------------------
# Engine Validation
# ----------------------------------------------------------------------------
# engine-strict=true
#
# Enforces strict validation of Node.js and pnpm versions defined in 
# package.json "engines" field.
#
# Why this is important:
# - Prevents installation with incompatible Node.js or pnpm versions
# - Ensures all team members and CI/CD use the same runtime environment
# - Fails fast with clear error message instead of subtle runtime issues
#
# Without this flag: Only shows a warning, installation continues
# With this flag: Installation fails immediately if version mismatch detected
#
# Works together with:
# - .nvmrc (defines exact Node.js version for developers and CI/CD)
# - package.json "engines" field (defines minimum required versions)
# ----------------------------------------------------------------------------
engine-strict=true

# ----------------------------------------------------------------------------
# Peer Dependencies
# ----------------------------------------------------------------------------
# auto-install-peers=true
#
# Automatically installs peer dependencies when missing.
#
# Why this is important:
# - Prevents "UNMET PEER DEPENDENCY" warnings during installation
# - Ensures all required peer dependencies are present
# - Reduces manual intervention when adding packages
#
# Example: If you install a package that requires React as peer dependency,
# pnpm will automatically install React if not already present.
#
# Note: This is the default behavior in pnpm 7+, but making it explicit
# ensures consistent behavior across all pnpm versions.
# ----------------------------------------------------------------------------
auto-install-peers=true

# ----------------------------------------------------------------------------
# Version Pinning
# ----------------------------------------------------------------------------
# save-exact=true
#
# Saves dependencies with exact versions (without ^ or ~ prefixes) in
# package.json when running "pnpm add <package>".
#
# Why this is important:
# - Ensures reproducible builds across all environments
# - Prevents unexpected breaking changes from minor/patch version updates
# - Works perfectly with RenovateBot, which manages all updates via PRs
# - Provides explicit control over when dependencies are updated
#
# Example behavior:
# Without this flag: "pnpm add astro" saves as "^5.16.6" (allows 5.x.x updates)
# With this flag: "pnpm add astro" saves as "5.16.6" (exact version only)
#
# Note: This doesn't affect existing dependencies, only new additions.
# RenovateBot will handle all version updates through tested pull requests.
# ----------------------------------------------------------------------------
save-exact=true
